document.addEventListener('DOMContentLoaded', () => {
    const inputText = document.getElementById('inputText');
    const toneSelect = document.getElementById('tone');
    const generateBtn = document.getElementById('generateBtn');
    const copyBtn = document.getElementById('copyBtn');
    const resultArea = document.getElementById('result');
    const historyList = document.getElementById('history');

    // å¤§å”æ§‹æ–‡å¿…å‚™å…ƒç´ 
    const emojis = ['ğŸ˜˜', 'ğŸ˜œ', 'ğŸ’¦', 'â—', 'â‰ï¸', 'â˜€', 'ğŸƒ', 'ğŸ˜‹', 'ğŸ’¬', 'âœ¨'];
    const particles = ['æ', 'å”·', 'å‘€', 'å‘¢', 'å–”', 'ï¼ˆç¬‘ï¼‰', ' (^_âˆ’)â˜†', 'ï¼ˆæ±—ï¼‰'];
    const greetings = ['XXé†¬ï¼Œæ™šå®‰å‘€', 'å–”å‘€ï¼Ÿ', 'å”å”æˆ‘å•Š...', 'ä»Šå¤©ä¹Ÿæ˜¯å……æ»¿æ´»åŠ›å‘¢', 'åœ¨å¹¹å˜›å‘¢ï¼Ÿ'];

    // ç”Ÿæˆé‚è¼¯
    generateBtn.addEventListener('click', () => {
        const text = inputText.value.trim();
        if (!text) {
            alert('è«‹è¼¸å…¥ä¸€äº›æ–‡å­—å–”ï¼(^_âˆ’)â˜†');
            return;
        }

        let result = "";
        const tone = toneSelect.value;

        // æ ¹æ“šèªæ°£æ±ºå®šèª‡å¼µç¨‹åº¦
        let repeatCount = tone === 'gentle' ? 1 : (tone === 'typical' ? 3 : 6);

        // çµ„åˆæ–‡å­—
        result = `${greetings[Math.floor(Math.random() * greetings.length)]} ${text}`;
        
        for (let i = 0; i < repeatCount; i++) {
            result += particles[Math.floor(Math.random() * particles.length)];
            result += emojis[Math.floor(Math.random() * emojis.length)];
        }

        // é¡¯ç¤ºçµæœ
        resultArea.textContent = result;
        copyBtn.disabled = false;

        // åŠ åˆ°æ­·å²ç´€éŒ„
        addToHistory(result);
    });

    // è¤‡è£½åŠŸèƒ½
    copyBtn.addEventListener('click', () => {
        navigator.clipboard.writeText(resultArea.textContent).then(() => {
            alert('è¤‡è£½æˆåŠŸäº†å”·ï¼ğŸ˜˜');
        });
    });

    function addToHistory(content) {
        const li = document.createElement('li');
        li.textContent = content;
        // åªä¿ç•™æœ€è¿‘ 10 ç­†
        if (historyList.children.length >= 10) {
            historyList.removeChild(historyList.lastChild);
        }
        historyList.prepend(li);
    }
});
